// Auto-generated commander image hashes
// Do not edit manually - regenerate using compute_hashes.py

export interface CommanderHash {
  id: string;
  name: string;
  phash: string;  // Perceptual hash (256-bit)
  ahash: string;  // Average hash (256-bit)
  dhash: string;  // Difference hash (256-bit)
}

export const commanderHashes: CommanderHash[] = [
  {
    id: 'aethelflaed',
    name: 'Aethelflaed',
    phash: 'b3360c4c1c67b0e3c9c779f25999324da38fe798d9924d1eba1c82e136b87199',
    ahash: '01ff03ff03ff04ff007f01e0f9c0fffff87ff87ffc7ff87ff87fe03f80000000',
    dhash: '170016402ed05be619e10f402b9c32f190fe31f021f041f080f042f00570f480',
  },
  {
    id: 'alexander-the-great',
    name: 'Alexander the Great',
    phash: 'a93c058112ddbfdd185af05816a590fd878b7b50a345a82f4a7ed7fe3f10c9a0',
    ahash: '00ff01ff01e70c4f0fdf3f4f7807e48681c783cfc601fc0ffefff003f0000000',
    dhash: '0be623390f8eb0db3919ea5d918e198c0f9d4e9c0c9b891f611e00464ea64e11',
  },
  {
    id: 'artemisia-i',
    name: 'Artemisia I',
    phash: 'b7ec9398d249680f8f389cf76832c6613f874e3ccb6334e4d2e66c1c93181c97',
    ahash: 'fe3ffc3ffc3fdc3fd83f903f801f840f800fe40fe003e00fe00ffb7ff31fe7ff',
    dhash: '30e809a8316831f831f522f4297a091a3abc087d421b0a9a965914400c7e0d3e',
  },
  {
    id: 'attila',
    name: 'Attila',
    phash: 'c77e8f904e090819ec783df1c7a7d0ae374872d3d213d732b1b986b15c8ec964',
    ahash: '078007800ff00ff00ff89ffcdfded3b6fff63ff03ff00c6000000000fe00fe00',
    dhash: '2d102e083c8498e27ad03098369625646e4c4c8478c218c42cecc96c44d228a8',
  },
  {
    id: 'baibars',
    name: 'Baibars',
    phash: '8edebcc7f1cf838e1e9ce1100d334d2e1131736d720c8398f3999819f36c9f49',
    ahash: '01ff03ff01bf013f03cf079f0737007307f307010f011e437c10fc00ffc00000',
    dhash: '177016340b60167c1e0c2e362c662de32eb35ad338a179dfe8b3d04c610cd470',
  },
  {
    id: 'belisarius',
    name: 'Belisarius',
    phash: '8a859dce558c28a57dde33189219c38ba7156727b16d3638ba625a96c5a38de7',
    ahash: '01ff01ff03ff0fff0fff07f7000f0007031f03bf027b067b047b780b4000dfff',
    dhash: '0b601b0006835e70bea36de767bc46b6c63fc63bc6eb8cebb8cbf09b99399686',
  },
  {
    id: 'boudica',
    name: 'Boudica',
    phash: '98c89919733ba3f17649183cd1f30d8ef47c63f1468fe47c0ae4d1072b3c73b0',
    ahash: '00ff01ff01ff01ff01ff03ff03ff03bf07bf0fbf1bdf325f214900017000f800',
    dhash: '0ba00ba407c817300b901708179037700f785b3ab6bc66db4f5b0e53a0ad1210',
  },
  {
    id: 'calvin',
    name: 'Calvin',
    phash: '942a9da47ac1d899798c6b4fe94e9bd64a16cb798568d29f4b18e86515a5cd29',
    ahash: '01e003f807fc07fc03fe07fe076c04fc0ffc17fe37fc23f022300030f000f800',
    dhash: '0b0017682cf92cf03edc5ad45acc59881990efd8edccc4e0cc642c6403240258',
  },
  {
    id: 'cao-cao',
    name: 'Cao Cao',
    phash: 'a555955592ab1ad5e35a2b2baf396a3084f33e879acae2e8ab2e7a0b2b3160b2',
    ahash: '00ff01fe01fe037e06de060e040e0e063e0604060002000e020000000000ff80',
    dhash: '05ea0b640be4167c2c986ccc184c58cc64c639464dde2d5a164806c0a2181211',
  },
  {
    id: 'centurion',
    name: 'Centurion',
    phash: 'a94a949b51ad196c9f96869da39c68b6bcd393640f652d92b32de439233e4959',
    ahash: '01ff01ff00ff01ff3e3f0c9f0eff03ff01f701e700e7007f032000400000f800',
    dhash: '0bb023288fad376ce536d93619b6def6079617de03ce1b46774ec4ceb09c2120',
  },
  {
    id: 'charlemagne',
    name: 'Charlemagne',
    phash: 'adc080d090f53ff80d6c3e3e788678039c07254f21ff8ef43ea1dba132ced86b',
    ahash: '03ff17ff1ffb3fff6bf75c8310070407c007c007800f801f807fc01f001f03ff',
    dhash: '67a6ef912723f73c9715b1176b3e980c9e5e82de03fd2b782df485fc66dc4600',
  },
  {
    id: 'charles-martel',
    name: 'Charles Martel',
    phash: '87a385c8d66086077b8f8b43b99d5b36a1f3559a4ae63de84f1b319296386c69',
    ahash: '1fff1fff1fff1fff17ff01cf090f089f000f000b041f1e1f0e030e0000000000',
    dhash: 'ba40be68bc74b6d8af98339d135e31bd5a9d5a93787ab0bab69bf8c7a9382281',
  },
  {
    id: 'city-keeper',
    name: 'City Keeper',
    phash: 'b1ee98c91ec515e60c662f2be8c94ef1c13a4f93cc90494a1bbdd46d1be6bc30',
    ahash: '038001ff01ff3dfff3fff1bfe00ff84cf1c6f94cf8ccf84cf00c800080000000',
    dhash: '3e0007683f64f1242768c76d8b3c52dc47842354219cf2cc08f818d30417c420',
  },
  {
    id: 'cleopatra-vii',
    name: 'Cleopatra VII',
    phash: '95c5130d784c94fa7ea18d972b362f749fb41b9499966b042c47664b7e4b941b',
    ahash: '01fe19bc093405f80efe0fe60ffc0ffc0ffc1ffe1ffe1ffe1ffe03be00000000',
    dhash: '7f08f720d36879c239c8bb8c3bb0b7b8b7b077b06330633c773cf7309b52f0c9',
  },
  {
    id: 'constance',
    name: 'Constance',
    phash: '8d8ecc326c319f2d5e5232f15b5cc95a432766d6d6c1368d16ac3719c43cc96b',
    ahash: '078007c7078f1fcf3fc70df70bff07df0fff0dff0def0cef08ef011f00070000',
    dhash: '2c064e9e3d19f29ffb8fb926b6365a975a1f5b4d5b4d59497149b6398d3d5a0c',
  },
  {
    id: 'constantine-i',
    name: 'Constantine I',
    phash: '80738c7c5f203f02687c5c795c1e2d478cd3dce0d27ca377c39f439a3b90e913',
    ahash: '030007001fff3fff27df37ff77b93bbb3b1f00374ff08e700e30000000000400',
    dhash: '6c409c107890f678df31ce3cc663e733c63ede769e1130d634f2b2ecb1ac9910',
  },
  {
    id: 'cyrus-the-great',
    name: 'Cyrus the Great',
    phash: '95551a6b1397e3ae2f359531c46e14ad7aa36d9443bd5a305aaac0ea50ea5a97',
    ahash: '007c00fe00f000b003fc07fc07fe02cf003b3f3fffffff7f38fe00fe039e000e',
    dhash: '02f003e007e001261e602ce82d9e2d9e0df3627ff27cb051f17061380d3a5eba',
  },
  {
    id: 'dragon-lancer',
    name: 'Dragon Lancer',
    phash: '811f999b79d1927c738e3c3be467679887317c27307ba6c241e69b250711e996',
    ahash: '00ff01ff01ff03ff078f1f8f23df2fff1c3f1c3f377f077f00ff00000000f800',
    dhash: '07c00b20138447ba1d39723cce9cda9f793479eccec83ce4cd64eca4b0603200',
  },
  {
    id: 'edward-of-woodstock',
    name: 'Edward of Woodstock',
    phash: '9f1c9b3a1a6359a3f3333a4313cce665a23b0f2d052dc54ad4db96d93e5429c4',
    ahash: '00f000f007fc07ef077f07b605effffffffffff801f801f001f00100ff00fffe',
    dhash: '0dc003815f001c0908663a641b8cc9a3c49c3c583b400b401760967096586006',
  },
  {
    id: 'el-cid',
    name: 'El Cid',
    phash: '866b999671949e5b3c4c3c64b99e7065a6664dcecbb08c9be669a69a3a683b22',
    ahash: '01ff01ff0fff1fff3fef3fef07ef073f07ff07ff07ff07ff0637022000000000',
    dhash: '37e203ccbda1739cf2cdc50dff0d1c6d4ced5ced5ced5ce5bce4b460a368b210',
  },
  {
    id: 'eulji-mundeok',
    name: 'Eulji Mundeok',
    phash: '9e64db39796d34d6658c7386369aad1861d1668a27679b3450e2926c2e67cf2c',
    ahash: '000003e003e007e007f007f80ff01bf01fdf07ff07b803f803e003c007e003e0',
    dhash: '01000f0906c814cb2da33dc25b10b730b7122e720e3206f006c20e002f400e48',
  },
  {
    id: 'frederick-i',
    name: 'Frederick I',
    phash: '9560954b5e460af578277467a5d8486c9bcd5387a6b626323b3fcc4b25f6acc0',
    ahash: '03fe03fc03fc0ffc1ffc3e5e385e38fc11ff13ff19ff1cff007f00400000df80',
    dhash: '166426445edcbbe0676c64bce5d8d3c8f7cb6798e5dab5dab55aa4d890c8b008',
  },
  {
    id: 'gaius-marius',
    name: 'Gaius Marius',
    phash: '911487fa46e98d8c3e587278e4b719191b193636a60c2d0dbd9e9e1e90feb49d',
    ahash: '07ff1fe00fff0cff38f833fc327e24f701e701ef01ff19fe5ce2104000000000',
    dhash: '3d68f5487b4671d8f195e790ece0cdc6898e8b1e9b9ab398b146e1c4c4cf1830',
  },
  {
    id: 'genghis-khan',
    name: 'Genghis Khan',
    phash: 'a3812499bc9bba5e79cbb360632d8f0d972c6c30927246e3e993b3795c278b86',
    ahash: '00ff01bf01bf079f0c8f1c0f1841f8c75dc3e023fc01fe48fe7f00ff00000000',
    dhash: '0fe80b3437b40d19395a31afb0cfa18cb3864a66280f14d900d442c3000090c0',
  },
  {
    id: 'guan-yu',
    name: 'Guan Yu',
    phash: 'd26383b50d481f504b91e5e6d2b463d0f14bc391a992dc3d36787cecb960e1db',
    ahash: '1fff0fff07ff0eff7e7ffe7ffedff830e6a0e4f0fc78e368c104f006ff00ef00',
    dhash: 'a5003ea04c98f8a7e4e9ecd9f29bd2a18da095b0d5e08ec9264ce62cc9215b2c',
  },
  {
    id: 'hannibal-barca',
    name: 'Hannibal Barca',
    phash: '8555dca21c71145760baefa8c38c815d173a2bf8da3868b50c71cc17c37aa7fe',
    ahash: '0400038003c003f01ffeffe3fea1ff1f301e3ffe01ff08fe07ff00270003fd00',
    dhash: '2c621e3246161e40fa04b50a29491839c032c160f74233ce5ce83c6ef16e0932',
  },
  {
    id: 'hermann',
    name: 'Hermann',
    phash: '9048b82159a38f9c1d9f2969f24c7298ad8b5316e12c63ea93de8def5a53ac27',
    ahash: '01ff03ff03ff7cff72ff703f307f01ff01ff05ff05ff057f033f00f000000000',
    dhash: 'af400760f680e0f8c5e4a364e6eedfbe1d7459623b52ba66be7df1c2a0c4b018',
  },
  {
    id: 'ishida-mitsunari',
    name: 'Ishida Mitsunari',
    phash: 'c445984f5b3a0bb0ad33f723e5261a1ad01be4b72ce54c710c3a8deb0dc4fdf4',
    ahash: '07c00fe003e071307ffc7ffcfb3f7ffe17fe133f1c1e1ff006600000ff80ff80',
    dhash: '1c80f9c03f00c262d360de64b678d4b0ec2636f2e0b07c407ce698f285922204',
  },
  {
    id: 'joan-of-arc',
    name: 'Joan of Arc',
    phash: '97a99ca8674a271a39f63b476c913655a6f9b0e6962ca4b027878c39c9a56d0f',
    ahash: '003e01e40ffc07fc07f803f801f803f803f803f80ff81ff80ff008700000fc00',
    dhash: '20f45b8479896f601f692f291789161917912f995d99f9c9f96852c490c49938',
  },
  {
    id: 'julius-caesar',
    name: 'Julius Caesar',
    phash: '96529654b1cda59db24d2b45ef133a9cca966eb394adcea3992b25a89269c94a',
    ahash: '00ff00fe01fc03f803f003f003f0077007f005fc0fcc0fc001c000e05000ffff',
    dhash: '07ea03e417e80eb12fe62ee42ee42ea42e8019b05b9c5a837b1041c4a4a42010',
  },
  {
    id: 'keira',
    name: 'Keira',
    phash: 'cfb59c3c1c8411e7d8cef0cfcba53a6fb9c367488f1a13438393c439443cf036',
    ahash: '03f803f807fcc627e70bffc3ffc7ffaf23fc07e81ec81cc818c000000000ff80',
    dhash: '17102e112cb80cac0c0b8d8349166128d6c07cc8b099b198f192f9900c00d290',
  },
  {
    id: 'kusunoki-masashige',
    name: 'Kusunoki Masashige',
    phash: '9b828e98243c3fbd1f3d392070437067b2f7b3934bccaccc584ef90cb039c2f9',
    ahash: '003f07ff07ef1fff7aff63ff01ff89ff877f00000860003f000fe007f01f0000',
    dhash: '10ec6d9a9b1e7236c4a6866db7843b943e50171813a11bf2135ec3dec0fc7620',
  },
  {
    id: 'lancelot',
    name: 'Lancelot',
    phash: 'ad560a7b64e56195622d8edccd7b9c6b608ba5a6b62412c94736999a49bb66c5',
    ahash: '000300030003003f03bf07ff07ff04ff046300ef00df019f63bfc31f413ffe3f',
    dhash: '002f0206003606fc1f242f040a66199718cb59ce399ef33ecb769a56877ed4e2',
  },
  {
    id: 'leonidas-i',
    name: 'Leonidas I',
    phash: '85c59715ee274183b8934c6ca1e6d8905b19bd0ec4eef3704e18a7eb7507a2f6',
    ahash: '0fff0ffe0f7e07fe0ffe1ffe037f01fe18f819dc1d9f1c001f000700f0ffefff',
    dhash: '1a82126258ea59223b62fec26e5e1b2cb1b07311731d71987420ce3106cc5ac0',
  },
  {
    id: 'lohar',
    name: 'Lohar',
    phash: 'e65b09642dac6db3bd2bf309819b618e967c73729b250dc62c064a37e07dc47c',
    ahash: '000f0007034705773c376dfffefffe7fff17ff80fe00fe10fe38fc00fc0007ff',
    dhash: '009d261d8e5e3a46e867db6fb1e604e7823484b384bb84f08872906c5834cc18',
  },
  {
    id: 'markswoman',
    name: 'Markswoman',
    phash: '8e6cb67271838cccf92633cd9cd37393a19e7119930d8c4c7399ec993c616366',
    ahash: '01ff037f077f07ff023f03ff07ff07ff07ff07ff03ff07bf07a000000000ffff',
    dhash: '03402e502c482ce40cf42e642ec429c82e402e481e280e68fa62b0608e001800',
  },
  {
    id: 'mehmed-ii',
    name: 'Mehmed II',
    phash: 'a5dc1fcc38a1fb130b3fa1bc5398e39183836e3fbe343271952362f2b163109e',
    ahash: '00ff01ff017f073f19bf1d9f050f2f0f3e3fe417ec07f81ff81ff00ff0010000',
    dhash: '05901b4026e85e74f330617a685a584d58ed0836083642be033f431a64af7b12',
  },
  {
    id: 'minamoto-no-yoshitsune',
    name: 'Minamoto no Yoshitsune',
    phash: '8c4e844e5b8fb3903fb138f9313718fed249ce609413b20747cd8fa645fc4739',
    ahash: '008700070f376f7f3f0723072787dfff07bf27ff00ff387f01ff010000000000',
    dhash: '83ae3f0d9a65de64ee6cce3ecc3e3d678b374b9811dae2c00f310f340e2b94c3',
  },
  {
    id: 'mulan',
    name: 'Mulan',
    phash: 'c1c5cf600f6084c75edc3f41f81f98930cf3cd2f19ee1fd0982fc83798d605a3',
    ahash: '03e01f601f601fe07ff0fde0fda0ff203db07d907f0c38061802001010003000',
    dhash: '3e08b848b0c030c9f08011c03140f062f332c330c058e31e31b631f3f436c102',
  },
  {
    id: 'osman-i',
    name: 'Osman I',
    phash: 'af6c806752b61fbca85f7a4bc408a5b143fb3afc3e100e4a4c0b5c3758e7a1e3',
    ahash: '07ff07ff07ff1c7f3e7f6f0fc03fb03f980fc00fc00fc000c000800080000000',
    dhash: '2dc07ed09ecc78f0f0fa98ad9a6f5176307d0c5c095938eb38a8393d087cd818',
  },
  {
    id: 'pelagius',
    name: 'Pelagius',
    phash: '8d9ca59570473c7ad850264da7274a67a9ed693998cbc988cb6ae9ae4a2b58da',
    ahash: '000f001e019c018f07cf0fff0fff05df07df07df07ff043f013f02200000ffff',
    dhash: '003e07381b3803195a9a789a59353f1c2f1c2f9d2d9d2ced3e6c0ee0854c8210',
  },
  {
    id: 'ragnar-lodbrok',
    name: 'Ragnar Lodbrok',
    phash: '85159f4e16eb11181ea818ed6ad4d8e963a563eb7b17cf55db0f4e104b5a0ad4',
    ahash: '01e007fceffefeffffcfe3ffe44e646e64ee640264023c0632d832fc13180018',
    dhash: '93c90e7898f4d0dcf24e0b56495689d8c9da88b6c8b6c89cc498e4d964383632',
  },
  {
    id: 'ramesses-ii',
    name: 'Ramesses II',
    phash: 'f9c39148d276499796fc66b3960c4e2ec1857b56058e90c6e50b1e6cc9fb7079',
    ahash: 'f9fff1f7f1e7f8e7e227c01f801fc00ff10f800ff003fa83f803fa03f343ff3b',
    dhash: '23432747030e03c6866e1c6925bd21bd633d3b3e032606bf02bb169f06c30662',
  },
  {
    id: 'richard-i',
    name: 'Richard I',
    phash: '9568935c7285148b798b0c3fad532b34b3a69baccbc9c6c9465bc4a35a2e70ee',
    ahash: '00ff01fe1ffc1fff16ff0fff0fec03e400e400c401b4033c030c00000000f800',
    dhash: '21aa0f24b860b1c268defc2cbf4cadcd338c67b46f2c667c7658accaa168b240',
  },
  {
    id: 'saladin',
    name: 'Saladin',
    phash: 'a4bf81a01bc19f7b953ce0b0ec30e6bf4efc9f42ce203e07cc2f2eb88450e4ba',
    ahash: '07ff10ff01ff01ff3c1f7e0f781f001fa41fc40fc207e00380018039003a0000',
    dhash: '3f00e3a0b3883364e138cc1ae27a497a48ba0c9e0cae4e0f279354f113f20861',
  },
  {
    id: 'sarka',
    name: 'Sarka',
    phash: '99a796de1a43f9ed639e26218c257492987333ce9cccd92da1a68e6977846836',
    ahash: '01ff00ff01ff03ff03ff07ff040f0c0f7ccffdc3f9e7fbeff3e3e000c0000000',
    dhash: '078807c00bc417241eb26cd9187a70ade99e131fd38d37ca448e90b610364808',
  },
  {
    id: 'scipio-africanus',
    name: 'Scipio Africanus',
    phash: '81e49cc63f20b23f785f13aca1d04f0b5cb9e27ad326a7c087ce5c1f581b3cb4',
    ahash: '00ff017f037f1fff1fff1bff39ff31ff33ff7fff3eff1cff0c480c0000001000',
    dhash: '2bd002d03e5070d0fa00b3606750c620c760d7c0f1b071dab9d858c9252426c8',
  },
  {
    id: 'seondeok',
    name: 'Seondeok',
    phash: 'beb704c1016af8065387e9bc06cf307a1c94ebc1f93d9cdb333807ccea460e3f',
    ahash: '01ff03ff03ff00bf023f04bffecbf80be003e003e003e193f44ff447f8000000',
    dhash: '179016b017a015320c746d39399b11938cb389938a930f1749970cd7622d5d02',
  },
  {
    id: 'sun-tzu',
    name: 'Sun Tzu',
    phash: 'a492b0cf5963b612dbc761a6a334527996485f09af65f16551e3a6c21f193e3c',
    ahash: '007f01ff01ff037f063f301f001f083f003f003f001f001f001f000000000000',
    dhash: '0fe00fb417b44ef43c74e2bad93a3b344ef42cf42cb42cb4ac74cc9890989400',
  },
  {
    id: 'takeda-shingen',
    name: 'Takeda Shingen',
    phash: 'd084a678737b9295d98c8b25ce9544717773313708915ce461d67cd23de652e7',
    ahash: 'f018fc3d38007c143f1c3f9c5fec7df07ff877f87ff8cff8137038c06040f800',
    dhash: '80f12061e275e0b4ec38ee38fb09c3c4e740ef31cf321a52e4a0f380c2c81280',
  },
  {
    id: 'tomoe-gozen',
    name: 'Tomoe Gozen',
    phash: '8e1987391f189b364c9e2643921d4f1ced8ca6e45661f8edb9a658f3b0d36259',
    ahash: '07ff06ff07ff0fff44ff62ff733f7f8f7d807fc07cff60ff4000000020002100',
    dhash: '5dc05db02dc0bd408d608de8e660de3cda1fc580d1da83c884009c104d284d20',
  },
  {
    id: 'tomyris',
    name: 'Tomyris',
    phash: '9895b991399b137c97294eceea66c6b2d938d934f895398d0e9a0bd90dd18953',
    ahash: '00ff00ff00fff1ff1fdf0b1b0b8f07fc06fc02fc0278016001300110000045ff',
    dhash: '25a58dea23b3e39ba7b73233d71a2d4809e80dd804d203460346863294d19d64',
  },
  {
    id: 'wu-zetian',
    name: 'Wu Zetian',
    phash: 'a7c0823b93bfbb969b1a2d3005f1979b9f8a5e1e287130fb69886f8c4e06861f',
    ahash: '04ff0eff0c3f077f0f3f100f0607c507c8f7d017d807d907d80bc00080000000',
    dhash: 'b9b678f9f87ff46eb830653dccde8a2f93a49776967e927e311a0e1c0a247109',
  },
  {
    id: 'yi-seong-gye',
    name: 'Yi Seong-Gye',
    phash: '931b8e1b6d249b07dc9f66e687e64f0ca74c4b1acb1b727063c6a68d1c3d6423',
    ahash: '0fff03ff00ff04f7063f1e3f06ff05ff00ff07ff09ff007f003f000000000000',
    dhash: '5b862fb839b279a6187d70f27cb479e41be45da4b2c4b6e4b164b0cca868a010',
  },
  {
    id: 'thutmose-iii',
    name: 'Thutmose III',
    phash: 'e464e3cd539b1c505b25709267908f37aa4b986131f6c78efa138cb030efcb4f',
    ahash: 'ffffff3fff3fff3ffe1ffc0ff80f7367ef6f070f4707001c2116025807480000',
    dhash: '82402260027a546c087f193be25dc64fd84d2c5aae56e67dce34c6d0bc995143',
  },
  {
    id: 'bjorn-ironside',
    name: 'Bj√∂rn Ironside',
    phash: 'b3360c4c1c67b0e3c9c779f25999324da38fe798d9924d1eba1c82e136b87199',
    ahash: '01ff03ff03ff04ff007f01e0f9c0fffff87ff87ffc7ff87ff87fe03f80000000',
    dhash: '170016402ed05be619e10f402b9c32f190fe31f021f041f080f042f00570f480',
  },
];

// Calculate hamming distance between two hex hash strings
export function hammingDistance(hash1: string, hash2: string): number {
  if (hash1.length !== hash2.length) return Infinity;
  
  let distance = 0;
  for (let i = 0; i < hash1.length; i++) {
    const bits1 = parseInt(hash1[i], 16);
    const bits2 = parseInt(hash2[i], 16);
    let xor = bits1 ^ bits2;
    while (xor) {
      distance += xor & 1;
      xor >>= 1;
    }
  }
  return distance;
}

// Compute average hash from ImageData (client-side)
export function computeAverageHash(imageData: ImageData, width: number, height: number, hashSize: number = 16): string {
  // Sample the image to hashSize x hashSize
  const samples: number[] = [];
  const cellWidth = width / hashSize;
  const cellHeight = height / hashSize;
  
  for (let row = 0; row < hashSize; row++) {
    for (let col = 0; col < hashSize; col++) {
      const x = Math.floor(col * cellWidth + cellWidth / 2);
      const y = Math.floor(row * cellHeight + cellHeight / 2);
      const i = (y * width + x) * 4;
      
      // Convert to grayscale
      const gray = imageData.data[i] * 0.299 + 
                   imageData.data[i + 1] * 0.587 + 
                   imageData.data[i + 2] * 0.114;
      samples.push(gray);
    }
  }
  
  // Calculate average
  const avg = samples.reduce((a, b) => a + b, 0) / samples.length;
  
  // Create binary hash
  let binary = '';
  for (const sample of samples) {
    binary += sample > avg ? '1' : '0';
  }
  
  // Convert to hex
  let hex = '';
  for (let i = 0; i < binary.length; i += 4) {
    hex += parseInt(binary.slice(i, i + 4), 2).toString(16);
  }
  
  return hex;
}

// Compute difference hash from ImageData (client-side)
export function computeDifferenceHash(imageData: ImageData, width: number, height: number, hashSize: number = 16): string {
  // Sample the image to (hashSize+1) x hashSize for horizontal differences
  const cellWidth = width / (hashSize + 1);
  const cellHeight = height / hashSize;
  
  let binary = '';
  
  for (let row = 0; row < hashSize; row++) {
    for (let col = 0; col < hashSize; col++) {
      const x1 = Math.floor(col * cellWidth + cellWidth / 2);
      const x2 = Math.floor((col + 1) * cellWidth + cellWidth / 2);
      const y = Math.floor(row * cellHeight + cellHeight / 2);
      
      const i1 = (y * width + x1) * 4;
      const i2 = (y * width + x2) * 4;
      
      const gray1 = imageData.data[i1] * 0.299 + imageData.data[i1 + 1] * 0.587 + imageData.data[i1 + 2] * 0.114;
      const gray2 = imageData.data[i2] * 0.299 + imageData.data[i2 + 1] * 0.587 + imageData.data[i2 + 2] * 0.114;
      
      binary += gray1 > gray2 ? '1' : '0';
    }
  }
  
  // Convert to hex
  let hex = '';
  for (let i = 0; i < binary.length; i += 4) {
    hex += parseInt(binary.slice(i, i + 4), 2).toString(16);
  }
  
  return hex;
}

// Compute perceptual hash (simplified DCT-based) from ImageData
export function computePerceptualHash(imageData: ImageData, width: number, height: number, hashSize: number = 16): string {
  // For a proper pHash we'd need DCT, but we'll use a simplified version
  // that samples at multiple scales and compares
  const samples: number[] = [];
  
  // Sample at a grid with some averaging
  const cellWidth = width / hashSize;
  const cellHeight = height / hashSize;
  
  for (let row = 0; row < hashSize; row++) {
    for (let col = 0; col < hashSize; col++) {
      let sum = 0;
      let count = 0;
      
      // Average a small region
      const startX = Math.floor(col * cellWidth);
      const endX = Math.floor((col + 1) * cellWidth);
      const startY = Math.floor(row * cellHeight);
      const endY = Math.floor((row + 1) * cellHeight);
      
      for (let y = startY; y < endY; y += 2) {
        for (let x = startX; x < endX; x += 2) {
          const i = (y * width + x) * 4;
          const gray = imageData.data[i] * 0.299 + imageData.data[i + 1] * 0.587 + imageData.data[i + 2] * 0.114;
          sum += gray;
          count++;
        }
      }
      
      samples.push(count > 0 ? sum / count : 0);
    }
  }
  
  // Calculate median (more robust than average for pHash)
  const sorted = [...samples].sort((a, b) => a - b);
  const median = sorted[Math.floor(sorted.length / 2)];
  
  // Create binary hash
  let binary = '';
  for (const sample of samples) {
    binary += sample > median ? '1' : '0';
  }
  
  // Convert to hex
  let hex = '';
  for (let i = 0; i < binary.length; i += 4) {
    hex += parseInt(binary.slice(i, i + 4), 2).toString(16);
  }
  
  return hex;
}

// Find best matching commander by image hash
export function findCommanderByHash(
  phash: string, 
  ahash: string, 
  dhash: string
): { commander: CommanderHash; confidence: number; score: number } | null {
  let bestMatch: CommanderHash | null = null;
  let bestScore = Infinity;
  
  for (const commander of commanderHashes) {
    // Weighted combination of hash distances
    const pDist = hammingDistance(phash, commander.phash);
    const aDist = hammingDistance(ahash, commander.ahash);
    const dDist = hammingDistance(dhash, commander.dhash);
    
    // Weight perceptual hash highest, then difference, then average
    const score = pDist * 1.0 + dDist * 0.8 + aDist * 0.6;
    
    if (score < bestScore) {
      bestScore = score;
      bestMatch = commander;
    }
  }
  
  if (!bestMatch) return null;
  
  // Convert score to confidence (lower score = higher confidence)
  const confidence = Math.max(0, 1 - (bestScore / 150));
  
  // Return match with score for debugging
  return { commander: bestMatch, confidence, score: bestScore };
}
